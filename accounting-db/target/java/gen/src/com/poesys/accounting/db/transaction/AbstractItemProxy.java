/**
 * Copyright 2016 Poesys Associates. All rights reserved.
 */
// Generated by AndroMDA Poesys/DB cartridge: DO NOT EDIT DIRECTLY.
// Template: AbstractDbDtoProxy.vsl

package com.poesys.accounting.db.transaction;


import java.io.IOException;

import org.apache.log4j.Logger;

import com.poesys.db.dto.AbstractLazyLoadingDtoProxy;


/**
 * <p>
 * A data-access layer data-transfer object (DTO) lazy-loading proxy for the
 * Item. This class is an abstract class that contains AndroMDA generated code;
 * change nothing in this class. Instead, override any methods in the concrete
 * subclass generated in the same package. AndroMDA will overwrite this class
 * each time you run it but will never overwrite the concrete subclass.
 * </p>
 * <p>
 * A specific amount of value associated with a specific account within a
 * transaction parent; the item debits and credits must cancel each other out
 * for the set of all items belonging to the transaction (the transaction must
 * "balance"); the transaction orders the set of items according to an integer
 * order number, which is part of the primary key
 * </p>
 *
 * @author Poesys/DB Cartridge
 */
public abstract class AbstractItemProxy extends AbstractLazyLoadingDtoProxy
    implements IItem {
  /** Default serial version UID for the Serializable DTO */
  private static final long serialVersionUID = 1L;

  /** Logger for this class */
  private static final Logger logger =
    Logger.getLogger(AbstractItemProxy.class);

  /** the deserializer used by the readObject method */
  private static final com.poesys.db.dto.Deserializer<AbstractItemProxy> deserializer =
    new com.poesys.db.dto.Deserializer<AbstractItemProxy>();

  // Lazy-loading/deserialization query setter strategy nested classes for
  // single-object associations

  /**
   * Query setter for lazily querying nested transaction object (object
   * property)
   *
   * Source: AddToOneAssociationRequiredObjectProperties
   *
   * @see com.poesys.accounting.db.transaction.sql.QueryTransaction
   */
  private class QueryTransactionSetter
      extends
      com.poesys.db.dto.AbstractLazyObjectSetter<com.poesys.accounting.db.transaction.ITransaction> {
    /** Serial version UID for Serializable object */
    private static final long serialVersionUID = 1L;

    /**
     * Create a QueryTransactionSetter object.
     */
    public QueryTransactionSetter() {
      super("com.poesys.accounting.db.transaction", 2147483647);
    }

    @Override
    protected String getClassName() {
      return com.poesys.accounting.db.transaction.Transaction.class.getName();
    }

    @Override
    protected com.poesys.db.pk.IPrimaryKey getKey() {
      // Generate an com.poesys.accounting.db.transaction.ITransaction primary
      // key with the value
      // from the com.poesys.accounting.db.transaction.IItem object
      return com.poesys.accounting.db.transaction.TransactionFactory.getTransactionPrimaryKey(((IItem)dto).getTransactionId());
    }

    @Override
    protected com.poesys.db.dao.query.IKeyQuerySql<com.poesys.accounting.db.transaction.ITransaction> getSql() {
      return new com.poesys.accounting.db.transaction.sql.QueryTransaction();
    }

    @Override
    protected void set(com.poesys.accounting.db.transaction.ITransaction dto) {
      setTransaction(dto);
    }

    @Override
    public boolean isSet() {
      // Set if proxied DTO transaction exists
      return (((Item)dto).getTransaction() != null);
    }
  }

  /**
   * Query setter for lazily querying nested account object (object property)
   *
   * Source: AddToOneAssociationRequiredObjectProperties
   *
   * @see com.poesys.accounting.db.account.sql.QueryAccount
   */
  private class QueryAccountSetter
      extends
      com.poesys.db.dto.AbstractLazyObjectSetter<com.poesys.accounting.db.account.IAccount> {
    /** Serial version UID for Serializable object */
    private static final long serialVersionUID = 1L;

    /**
     * Create a QueryAccountSetter object.
     */
    public QueryAccountSetter() {
      super("com.poesys.accounting.db.account", 2147483647);
    }

    @Override
    protected String getClassName() {
      return com.poesys.accounting.db.account.Account.class.getName();
    }

    @Override
    protected com.poesys.db.pk.IPrimaryKey getKey() {
      // Generate an com.poesys.accounting.db.account.IAccount primary key with
      // the value
      // from the com.poesys.accounting.db.transaction.IItem object
      return com.poesys.accounting.db.account.AccountFactory.getAccountPrimaryKey(((IItem)dto).getAccountName(),
                                                                                  ((IItem)dto).getEntityName());
    }

    @Override
    protected com.poesys.db.dao.query.IKeyQuerySql<com.poesys.accounting.db.account.IAccount> getSql() {
      return new com.poesys.accounting.db.account.sql.QueryAccount();
    }

    @Override
    protected void set(com.poesys.accounting.db.account.IAccount dto) {
      setAccount(dto);
    }

    @Override
    public boolean isSet() {
      // Set if proxied DTO account exists
      return (((Item)dto).getAccount() != null);
    }
  }

  // Setter strategy nested classes for multiple-object associations

  /** Flag indicating whether the reimbursingItems property has been loaded */
  transient boolean reimbursingItemsLoaded = false;

  /**
   * Query setter for lazily querying nested reimbursingItems collection
   * (collection property)
   *
   * Source: TransformToProperty + AddToManyAssociationCollectionProperties
   *
   * @see com.poesys.accounting.db.transaction.sql.QueryReimbursingItemsByItem
   */
  private class QueryReimbursingItemsSetter
      extends
      com.poesys.db.dto.AbstractLazyListSetter<com.poesys.accounting.db.transaction.IItem, IItem, java.util.Collection<com.poesys.accounting.db.transaction.IItem>> {
    /** Serial version UID for Serializable object */
    private static final long serialVersionUID = 1L;
    private static final int FETCH_SIZE = 10;

    /**
     * Create a QueryReimbursingItemsSetter object.
     */
    public QueryReimbursingItemsSetter() {
      super("com.poesys.accounting.db.transaction", 2147483647);
    }

    @Override
    protected String getClassName() {
      return com.poesys.accounting.db.transaction.Item.class.getName();
    }

    @Override
    protected int getFetchSize() {
      return FETCH_SIZE;
    }

    @Override
    protected IItem getParametersDto() {
      return AbstractItemProxy.this;
    }

    @Override
    protected com.poesys.db.dao.query.IParameterizedQuerySql<com.poesys.accounting.db.transaction.IItem, IItem> getSql() {
      return new com.poesys.accounting.db.transaction.sql.QueryReimbursingItemsByItem();
    }

    @Override
    protected void set(java.util.Collection<com.poesys.accounting.db.transaction.IItem> collection) {
      try {
        // Register the observer parent with the subject children.
        for (com.poesys.accounting.db.transaction.IItem child : collection) {
          child.attach(AbstractItemProxy.this.dto,
                       com.poesys.db.dao.DataEvent.MARKED_DELETED);
          child.attach(AbstractItemProxy.this.dto,
                       com.poesys.db.dao.DataEvent.DELETE);
        }
        setReimbursingItems(collection);
      } catch (com.poesys.db.dto.DtoStatusException e) {
        // Just lazy loading here, not actually setting. Ignore this exception.
      }
    }

    @Override
    public boolean isSet() {
      // Set if proxy has lazily loaded reimbursingItems
      return reimbursingItemsLoaded;
    }
  }

  @Override
  public void addReimbursingItem(com.poesys.accounting.db.transaction.IItem object) {
    // Collection is lazily loaded, check and load if necessary.
    if (!reimbursingItemsLoaded) {
      getReimbursingItems();
    }
    ((Item)dto).addReimbursingItem(object);
  }

  /** Flag indicating whether the receivables property has been loaded */
  transient boolean receivablesLoaded = false;

  /**
   * Query setter for lazily querying nested receivables collection (collection
   * property)
   *
   * Source: TransformToProperty + AddToManyAssociationCollectionProperties
   *
   * @see com.poesys.accounting.db.transaction.sql.QueryReceivablesByItem
   */
  private class QueryReceivablesSetter
      extends
      com.poesys.db.dto.AbstractLazyListSetter<com.poesys.accounting.db.transaction.IItem, IItem, java.util.Collection<com.poesys.accounting.db.transaction.IItem>> {
    /** Serial version UID for Serializable object */
    private static final long serialVersionUID = 1L;
    private static final int FETCH_SIZE = 10;

    /**
     * Create a QueryReceivablesSetter object.
     */
    public QueryReceivablesSetter() {
      super("com.poesys.accounting.db.transaction", 2147483647);
    }

    @Override
    protected String getClassName() {
      return com.poesys.accounting.db.transaction.Item.class.getName();
    }

    @Override
    protected int getFetchSize() {
      return FETCH_SIZE;
    }

    @Override
    protected IItem getParametersDto() {
      return AbstractItemProxy.this;
    }

    @Override
    protected com.poesys.db.dao.query.IParameterizedQuerySql<com.poesys.accounting.db.transaction.IItem, IItem> getSql() {
      return new com.poesys.accounting.db.transaction.sql.QueryReceivablesByItem();
    }

    @Override
    protected void set(java.util.Collection<com.poesys.accounting.db.transaction.IItem> collection) {
      try {
        // Register the observer parent with the subject children.
        for (com.poesys.accounting.db.transaction.IItem child : collection) {
          child.attach(AbstractItemProxy.this.dto,
                       com.poesys.db.dao.DataEvent.MARKED_DELETED);
          child.attach(AbstractItemProxy.this.dto,
                       com.poesys.db.dao.DataEvent.DELETE);
        }
        setReceivables(collection);
      } catch (com.poesys.db.dto.DtoStatusException e) {
        // Just lazy loading here, not actually setting. Ignore this exception.
      }
    }

    @Override
    public boolean isSet() {
      // Set if proxy has lazily loaded receivables
      return receivablesLoaded;
    }
  }

  @Override
  public void addReceivableItem(com.poesys.accounting.db.transaction.IItem object) {
    // Collection is lazily loaded, check and load if necessary.
    if (!receivablesLoaded) {
      getReceivables();
    }
    ((Item)dto).addReceivableItem(object);
  }

  /** Flag indicating whether the reimbursements property has been loaded */
  transient boolean reimbursementsLoaded = false;

  /**
   * Query setter for lazily querying nested reimbursingItems collection
   * (collection property)
   *
   * Source: AddAssociationClassCollectionProperties
   *
   * @see com.poesys.accounting.db.transaction.sql.QueryReimbursingItemsByItem
   */
  private class QueryReimbursementsSetter
      extends
      com.poesys.db.dto.AbstractLazyListSetter<com.poesys.accounting.db.transaction.IReimbursement, IItem, java.util.Collection<com.poesys.accounting.db.transaction.IReimbursement>> {
    /** Serial version UID for Serializable object */
    private static final long serialVersionUID = 1L;
    private static final int FETCH_SIZE = 10;

    /**
     * Create a QueryReimbursementsSetter object.
     */
    public QueryReimbursementsSetter() {
      super("com.poesys.accounting.db.transaction", 2147483647);
    }

    @Override
    protected String getClassName() {
      return com.poesys.accounting.db.transaction.Reimbursement.class.getName();
    }

    @Override
    protected int getFetchSize() {
      return FETCH_SIZE;
    }

    @Override
    protected IItem getParametersDto() {
      return AbstractItemProxy.this;
    }

    @Override
    protected com.poesys.db.dao.query.IParameterizedQuerySql<com.poesys.accounting.db.transaction.IReimbursement, IItem> getSql() {
      return new com.poesys.accounting.db.transaction.sql.QueryReimbursingItemsReimbursementByItem();
    }

    @Override
    protected void set(java.util.Collection<com.poesys.accounting.db.transaction.IReimbursement> collection) {
      try {
        // Register the observer parent with the subject children.
        for (com.poesys.accounting.db.transaction.IReimbursement child : collection) {
          child.attach(AbstractItemProxy.this.dto,
                       com.poesys.db.dao.DataEvent.MARKED_DELETED);
          child.attach(AbstractItemProxy.this.dto,
                       com.poesys.db.dao.DataEvent.DELETE);
        }
        setReimbursements(collection);
      } catch (com.poesys.db.dto.DtoStatusException e) {
        // Just lazy loading here, not actually setting. Ignore this exception.
      }
    }

    @Override
    public boolean isSet() {
      // Set if proxy has lazily loaded reimbursingItems
      return reimbursingItemsLoaded;
    }
  }

  @Override
  public void addReimbursement(com.poesys.accounting.db.transaction.IReimbursement object) {
    // Collection is lazily loaded, check and load if necessary.
    if (!reimbursingItemsLoaded) {
      getReimbursingItems();
    }
    ((Item)dto).addReimbursement(object);
  }

  /**
   * Create an AbstractItemProxy. The concrete subclass must call this
   * constructor.
   *
   * @param dto the DTO to proxy
   */
  public AbstractItemProxy(Item dto) {
    super(dto);

    // Setter arrays
    readObjectSetters = new java.util.ArrayList<com.poesys.db.dto.ISet>();

    // Add query setters for single-object deserialization.
    readObjectSetters.add(new QueryTransactionSetter());
    readObjectSetters.add(new QueryAccountSetter());
  }

  /**
   * Read an object from an input stream, de-serializing it. Each generated
   * class must have this private method, which the deserialize method calls
   * through Java reflection on the specific class. The class calls a shared
   * code method to run the readObjectSetters.
   * 
   * @param in the object input stream
   * @throws ClassNotFoundException when a nested object class can't be found
   * @throws IOException when there is an IO problem reading the stream
   */
  private void readObject(java.io.ObjectInputStream in)
      throws java.io.IOException, ClassNotFoundException {
    logger.debug("Deserializing object of class " + this.getClass().getName()
                 + " with readObject in AbstractItemProxy");
    // Do the read-object deserialization.
    deserializer.doReadObject(in, this);
  }

  @Override
  public boolean equals(Object obj) {
    AbstractItemProxy otherProxy = (AbstractItemProxy)obj;
    return ((Item)dto).equals(otherProxy.dto);
  }

  @Override
  public int hashCode() {
    return ((Item)dto).hashCode();
  }

  // Local properties (attributes, associations, and association classes)

  @Override
  public java.math.BigInteger getTransactionId() {
    return ((Item)dto).getTransactionId();
  }

  @Override
  public void setTransactionId(java.math.BigInteger transactionId)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setTransactionId(transactionId);
  }

  @Override
  public java.lang.Integer getOrderNumber() {
    return ((Item)dto).getOrderNumber();
  }

  @Override
  public void setOrderNumber(java.lang.Integer orderNumber)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setOrderNumber(orderNumber);
  }

  @Override
  public java.lang.Double getAmount() {
    return ((Item)dto).getAmount();
  }

  @Override
  public void setAmount(java.lang.Double amount)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setAmount(amount);
  }

  @Override
  public java.lang.Boolean getDebit() {
    return ((Item)dto).getDebit();
  }

  @Override
  public void setDebit(java.lang.Boolean debit)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setDebit(debit);
  }

  @Override
  public java.lang.Boolean getChecked() {
    return ((Item)dto).getChecked();
  }

  @Override
  public void setChecked(java.lang.Boolean checked)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setChecked(checked);
  }

  @Override
  public com.poesys.accounting.db.transaction.ITransaction getTransaction() {
    return ((Item)dto).getTransaction();
  }

  @Override
  public void setTransaction(com.poesys.accounting.db.transaction.ITransaction transaction)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setTransaction(transaction);
  }

  @Override
  public com.poesys.accounting.db.account.IAccount getAccount() {
    return ((Item)dto).getAccount();
  }

  @Override
  public void setAccount(com.poesys.accounting.db.account.IAccount account)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setAccount(account);
  }

  @Override
  public java.lang.String getAccountName() {
    return ((Item)dto).getAccountName();
  }

  @Override
  public void setAccountName(java.lang.String accountName)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setAccountName(accountName);
  }

  @Override
  public java.lang.String getEntityName() {
    return ((Item)dto).getEntityName();
  }

  @Override
  public void setEntityName(java.lang.String entityName)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setEntityName(entityName);
  }

  @Override
  public java.util.Collection<com.poesys.accounting.db.transaction.IItem> getReimbursingItems() {
    // Lazy-load the local property reimbursingItems if not loaded.
    if (!reimbursingItemsLoaded) {
      com.poesys.db.dto.ISet setter = new QueryReimbursingItemsSetter();
      setter.set();
      // Mark the field as loaded once the query setter has run.
      reimbursingItemsLoaded = true;
    }
    return ((Item)dto).getReimbursingItems();
  }

  @Override
  public void clearReimbursingItems() {
    // Only clear if loaded already.
    if (reimbursingItemsLoaded) {
      try {
        // Call the local lazy property setter to clear the property.
        ((Item)dto).setReimbursingItems(null);
        ((Item)dto).undoStatus();
        reimbursingItemsLoaded = false;
      } catch (com.poesys.db.dto.DtoStatusException e) {
        // Couldn't set status to CHANGED, ignore because we don't want it set
      }
    }
  }

  @Override
  public void setReimbursingItems(java.util.Collection<com.poesys.accounting.db.transaction.IItem> reimbursingItems) {
    ((Item)dto).setReimbursingItems(reimbursingItems);
    // Mark the property loaded and undo the status change.
    dto.undoStatus();
    reimbursingItemsLoaded = true;
  }

  @Override
  public java.util.Collection<com.poesys.accounting.db.transaction.IItem> getReceivables() {
    // Lazy-load the local property receivables if not loaded.
    if (!receivablesLoaded) {
      com.poesys.db.dto.ISet setter = new QueryReceivablesSetter();
      setter.set();
      // Mark the field as loaded once the query setter has run.
      receivablesLoaded = true;
    }
    return ((Item)dto).getReceivables();
  }

  @Override
  public void clearReceivables() {
    // Only clear if loaded already.
    if (receivablesLoaded) {
      try {
        // Call the local lazy property setter to clear the property.
        ((Item)dto).setReceivables(null);
        ((Item)dto).undoStatus();
        receivablesLoaded = false;
      } catch (com.poesys.db.dto.DtoStatusException e) {
        // Couldn't set status to CHANGED, ignore because we don't want it set
      }
    }
  }

  @Override
  public void setReceivables(java.util.Collection<com.poesys.accounting.db.transaction.IItem> receivables) {
    ((Item)dto).setReceivables(receivables);
    // Mark the property loaded and undo the status change.
    dto.undoStatus();
    receivablesLoaded = true;
  }

  @Override
  public java.util.Collection<com.poesys.accounting.db.transaction.IReimbursement> getReimbursements() {
    // Lazy-load the local property reimbursingItems if not loaded.
    if (!reimbursementsLoaded) {
      com.poesys.db.dto.ISet setter = new QueryReimbursementsSetter();
      setter.set();
      // Mark the field as loaded once the query setter has run.
      reimbursementsLoaded = true;
    }
    return ((Item)dto).getReimbursements();
  }

  @Override
  public void clearReimbursements() {
    // Only clear if loaded already.
    if (reimbursingItemsLoaded) {
      try {
        // Call the local lazy property setter to clear the property.
        ((Item)dto).setReimbursingItems(null);
        ((Item)dto).undoStatus();
        reimbursingItemsLoaded = false;
      } catch (com.poesys.db.dto.DtoStatusException e) {
        // Couldn't set status to CHANGED, ignore because we don't want it set
      }
    }
  }

  @Override
  public void setReimbursements(java.util.Collection<com.poesys.accounting.db.transaction.IReimbursement> reimbursements)
      throws com.poesys.db.InvalidParametersException {
    ((Item)dto).setReimbursements(reimbursements);
    // Mark the property loaded and undo the status change.
    dto.undoStatus();
    reimbursingItemsLoaded = true;
  }

  @Override
  public void markChildrenDeleted() {
    ((Item)dto).markChildrenDeleted();
  }
}